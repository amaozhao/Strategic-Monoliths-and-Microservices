# 事件优先架构
## 执行摘要

本书的这一部分介绍了导致高度通用和适应性强的应用程序和服务的软件架构风格和机制。它确实具有更多的技术倾向，但对于许多不经常练习软件开发的人来说，插图和解释应该是可口的。至少，建议高管和其他高级管理人员对做出良好的软件架构决策有基本的了解，这有助于从业者避免错误的决策。有了这些知识，就可以随意与软件架构师和开发人员交谈，并询问他们所做的选择。就这些决定向他们提出挑战，这些决定必须经得起时间和无情变化的考验。

## 第 8 章：基础架构

每个软件架构都必须从某个地方开始，本章提供了开始这种努力的构建块。正如预期的那样，必须设置并遵循一些基本原则，以使软件架构足够灵活，以承载在软件开发生命周期的早期、中期和后期做出的任何数量的决策。

- 你必须了解哪些软件架构风格和决策是常用的，哪些适合更狭义的系统构建情况。
- 使用端口和适配器样式可以建立最灵活的架构，并根据需要为早期和晚期决策留出空间。此外，根据正在构建的特定上下文，考虑可以在端口和适配器样式中使用的四个选项。
- 考虑使用模块化来解决整体和微服务以及两者混合的上下文划分。
- 初步了解 REST，这是一种广泛使用的浏览器到服务器通信的 Web 风格，同时发现 REST 比大多数开发人员想象的要通用得多。
- 掌握支持不受基于用户特征的功能驱动的架构需求的关键性质：安全性、隐私、性能、可扩展性、弹性和复杂性。

## 第 9 章：消息和事件驱动的架构
使用基于消息和事件驱动架构的原因有很多。根据熟悉的请求-响应会引入多个故障点，包括因导致级联中断而臭名昭著的故障点。通过网络以及在云和多云环境中运行的分布式系统的性质要求容忍延迟，其规模在任何给定时间都是不可预测的。通过设计优雅地处理延迟的架构，系统和子系统能够更好地接受延迟。这正是消息传递基础设施所支持的，并且消息传递是通常提供事件以供消费的方式。这种方法几乎消除了对网络延迟的担忧，并使得交付更具响应性的系统成为可能，因为基于消息的基础支持并支持弹性和弹性子系统及其内部运行时组件。

- 大型系统中的一个常见用例是多个业务功能在分步工作流中共享，从头到尾进行。例如，当申请人请求一份保险单时，(1) 必须验证他们的申请以获得正确和完整的数据。接下来，(2) 必须对应用程序进行风险评估。如果风险是可以接受的， (3) 必须计算保险费率。此时，(4) 生成报价，并且 (5) 申请人有机会接受它。如果要约被接受，则 (6) 保单将被承保。
- 所有步骤都必须由系统管理，本章解释了可用于执行此操作的两个选项：编排和编排。
- 编排是一个过程，在这个过程中，完成给定工作流程步骤的决定由各个子系统决定。每个上下文子系统都必须理解刺激，例如事件通知，它表示接下来必须发生给定的步骤。编排最适合用于具有较少必要步骤的更简单的流程工作流。
- 编排是一个过程，在该过程中，中央控制机制通过命令每个步骤在指定时间和按照指示进行来指导工作流步骤。当流程包括多个或多个复杂步骤（例如保单承保工作流程）时，编排最有用。
- 做可能可行的最简单的事情通常是最好的选择。其中一种方法是通过基于 Web 的请求-响应过程将事件提供给感兴趣的子系统。这种技术使用存储在磁盘文件中的事件日志，类似于 Web 服务器静态内容（例如，HTML 页面和图像），根据请求一次为客户端提供一个日志。它基于 Web 的规模和性能。服务器可能不时不可用的事实通常没有问题。客户端已经假设服务器子系统上发生的事情与客户端子系统上的反应所需的一个或多个步骤之间存在延迟，以使它们协调一致。
- 引入了架构技术作为跟踪子系统中所有数据更改的手段，以便在子系统的生命周期内维护更改的审计跟踪。当政府或行业法规要求证明哪些数据发生了变化以及该变化何时发生时，这种方法通常最有用。
- 有时，将根据用户命令更改的数据与同一用户查看的数据区别对待是有帮助的，以决定应该命令哪些数据更改。当用户查看的数据的形状和内容是比根据命令更改的更有限的数据更丰富的信息聚合时，就会出现这种情况。这种架构技术在两种数据之间进行了划分，以便每一方都可以针对其使用方式进行自定义优化。

没有必要成为软件架构师来欣赏第 III 部分章节中提供的架构指南中包含的简单功能。每一位投资软件创新作为竞争优势的高管和其他高级管理人员都必须熟悉代表他们做出的架构决策。第三部分为管理人员和软件专业人员等提供了对这个主题的高度平易近人的处理。